
# WEBBYLAB
<p align="justify">
  Приложение построено по патерну MVC. Запуск происходит из index. В файле содержится обработка API express'ом, прослушивание порта и запуск БД. В папке controllers находится тонкий слой контроллеров. Там же находится и middleware обработчика ошибок. Контроллеры принимают rquest и возвращают response. Тут же реализован механизм загрузки файла через потоки. Сделано это в целях предотвращения перегрузки памяти сервера. Сервисы (папка services) имеют в себе правила валидации и обработку данных, пришедших с клиента. Данные записываются в БД и возвращают id записанного файла, или информацию по нему. Схемы БД и отношения таблиц друг к другу описаны в файле model.
</p><p align="justify">
  Присутствует свой класс ошибки для разделения ошибок, вызванных непредвиденным поведением и ошибок, которые ожидаются от клиента (ApiError). RunService являет собой функцию высшего порядка, для унификации валидатора для всех возможных сервисов. Простым языком, что бы не писать в каждом сервисе одинаковый перехватчик ошибок.
	</p>

# Инструкции
## Запуск продакшена в Docker
```cmd
cd webbylab
docker-compose up
```
## Запуск локально
```cmd
cd webbylab
cd server
docker-compose up
npm start
cd ../client
npm start
```
## Запуск тестов
```cmd
cd webbylab
cd server
docker-compose up
npm start
npm test
```
